<html>
<head>
	<link type="text/css" rel="stylesheet" href="/style-guide/css/fluig-style-guide.min.css"/>
	<script type="text/javascript" src="/portal/resources/js/jquery/jquery.js"></script>
	<script type="text/javascript" src="/portal/resources/js/jquery/jquery-ui.min.js"></script>
	<script type="text/javascript" src="/portal/resources/js/mustache/mustache-min.js"></script>
	<script type="text/javascript" src="/style-guide/js/fluig-style-guide.min.js" charset="utf-8"></script>
	<script type="text/javascript" src="/webdesk/vcXMLRPC.js"></script>
	<script type="text/javascript" src="Custom.js"></script> 
	<script type="text/javascript" src="stateDefinition.js"></script>
	<script type="text/javascript" src="acao.js"></script>
	<script type="text/javascript" src="projeto.js"></script>
	<script type="text/javascript" src="unidade.js"></script>
	<style type="text/css">
		.Obrigatorio{
			color: red;
		}
	</style>

</head>
<body>
<div class="fluig-style-guide">
<form name="form" role="form">

	<input type="hidden" name="hdn_userResp" id="hdn_userResp">
	<input type="hidden" name="hdn_prazo1" id="hdn_prazo1">
	
	<input type="hidden" name="dte_Prazo" id="dte_Prazo">
	<input type="hidden" name="hd_numSuperior" id="numSuperior">

	<input type="hidden" name="hdn_lastState" id="hdn_lastState">
	<input type="hidden" name="hdn_State" id="hdn_State">
	<input type="hidden" name="hdn_diretoria" id="hdn_diretoria">

	<input type="hidden" name="hdn_valorRef" id="hdn_valorRef">
	<input type="hidden" name="hdn_valorTotal" id="hdn_valorTotal">


	<input type="hidden" name="txt_dtAlsHidden" id="txt_dtAlsHidden">
	<input type="hidden" name="dataUtilizacaoHidden" id="dataUtilizacaoHidden">
	<input type="hidden" name="diferencaDiasHidden" id="diferencaDiasHidden">
	<input type="hidden" name="dataDaMovimentacaoProRM" id="dataDaMovimentacaoProRM">
	<input type="hidden" name="diferencaDiasHiddenRM" id="diferencaDiasHiddenRM"> 
	<input type="hidden" name="analistaHidden" id="analistaHidden" value=""></input>

	<div class="panel panel-primary" id="PedidoPagamento">
	<div class="panel-heading">
		<h1><b>Adiantamento & Ressarcimento</b></h1>
	</div>
	</div>

	<div class="panel panel-primary" id="DadosSolicitante">
	<div class="panel-heading">
		<h3 class="panel-title">
			<b>Dados do solicitante</b>
		</h3>
	</div>
	<div class="panel-body">
	<div class="col-md-4">
	<div class="form-group">
		<label for="cmb_NomeSolicita">Nome Solicitante:</label>
		<select 
			name=			"cmb_NomeSolicita" 
			id=				"cmb_NomeSolicita" 
			dataset=		"colleague" 
			datasetkey=		"colleagueId" 
			datasetvalue=	"colleagueName" 
			class=			"form-control"
			readonly>
		</select>
	</div>
	</div>
	<div class="col-md-4">
	<div class="form-group">
		<label for="dt_dataSolicita">Data e horário:</label>
		<input type="text" class="form-control" name="dt_dataSolicita" id="dt_dataSolicita">
	</div>
	</div>
	<div class="col-md-3">
	<div class="form-group">
		<label for="txt_NumProc">Numero da Solicitação:</label>
		<input type="text" class="form-control" name="txt_NumProc" id="txt_NumProc">
	</div>
	</div>
	<div class="col-md-4">
	<div class="form-group">
		<label for="cmb_GerenteSolicitante">Superior para Aprovação:</label>
		<!--<input type="text" class="form-control" name="cmb_GerenteSolicitante" id="cmb_GerenteSolicitante">
		-->
		<select 
			name=			"cmb_GerenteSolicitante" 
			id=				"cmb_GerenteSolicitante" 
			dataset=		"dsc_Unidades" 
			datasetkey=		"Matricula" 
			datasetvalue=	"NomeGerente" 
			class=			"form-control"
			>
		</select>
	</div>
	</div>
	<div class="col-md-5">
	<div class="form-group">
		<label for="cmb_UnidadeSolicitante">Unidade Solicitante:</label>
		<input type="text" class="form-control" name="cmb_UnidadeSolicitante" id="cmb_UnidadeSolicitante" readonly>
	</div>
	</div>
	</div>
	</div>

	<div class="panel panel-primary" id="DadosPedido">
	<div class="panel-heading">
		<h3 class="panel-title">
			<b>Dados do Serviço</b>
		</h3>
	</div>
	<div class="panel-body">
	<div class="col-md-12 row">
	<div class="col-md-4">
	<div class="form-group">
		<label for="slc_PagamentoPara">Pedido de Pagamento de:</label>
		<select class="form-control" name="slc_PagamentoPara" id="slc_PagamentoPara">
			<option value="0">Selecione</option>
			<option value="1">Adiantamentos</option>
			<option value="2">Ressarcimentos</option>
		</select>
	</div>
	</div>

		<!-- Card Adiantamento -->
		<div class="form-group row col-md-12">	
			<div id="cardAdiantamento">
				<div class="panel-body">
				  <div class="card" id="cardAdiantamento">
					<div class="card-body">
					  <h3 class="card-title">
						<script src="https://cdn.lordicon.com/ritcuqlt.js"></script>
						<lord-icon src="https://cdn.lordicon.com/wdqztrtx.json" 
						trigger="loop" 
						colors="primary:#FF0000" 
						style="width: 25px; height: 25px; padding-top: 4px;"></lord-icon>
						Necessita comprar materiais ou serviços de pequena monta?
						  Considere as opções:
	  
					  </h3>
					  <ul>
					  <div id="ad"> 
						  <li><strong>Pela desburocratização alicerçada na IN 35 Item 7.2.2 não precisa comprovar a
							  regularidade Fiscal e evita transitar recursos pela conta pessoal do solicitante</strong></li>
	  
						  <li><strong>Por Solicitação de Adiantamentos, porém, requer as seguintes recomendações:</strong></li>
	  
						  <ul>→ Consultar USO ou acessar Processos Licitatórios se o produto ou serviço temos homologado para Sede e Escritórios Regionais,
							   a fim de evitar fracionamento de despesas, seguindo recomendação do Acordão 1796/2018 – TCU – Plenário</ul>
						  <ul>→ Consultar Normativos Internos da UCOF se aquele produto ou serviço, não tem vedação;</ul>
						  <li><strong>Não esquecer:</strong></li>
						  <ul>→ De atentar para os demais procedimentos de solicitação e Prestação de Contas;</ul>
						  <ul>→ Ao contratar PF, atentar que precisa fazer a retenção de 20% de INSS e dependendo do valor, o Imposto de renda;</ul>
						  <ul>→ De pagar o valor líquido da Nota Fiscal de serviço, quando houver retenções;</ul>
						  <ul>→ De que a Prestação de Contas de Adiantamento é exatamente do valor solicitado, qualquer valor a maior, 
							  a diferença precisará ser solicitada como ressarcimento.</ul>					                  
	  
						  <li><strong>A UCOF fica ao dispor para esclarecimentos quanto à classificação da natureza de despesa, 
							  de forma que ao iniciar a solicitação, 
							  desmembre os itens de acordo com as naturezas que serão utilizadas.</strong></li>
					  </div>
					  <br><br>
					  <div class="form-group row">  
						<div class="custom-checkbox custom-checkbox-success">
							<input type="checkbox" id="cbAdiantamento" name="cbAdiantamento">
							<label for="cbAdiantamento">ESTOU CIENTE</label>
						</div>
					</div>
					  </ul>
					</div>
				  </div>
				</div>
			</div> 
		</div>	
	  
			<!--Card Ressarcimento -->
		<div class="form-group row col-md-12">	
			<div id="cardRessarcimento">
			  <div class="panel-body">
				<div class="card" id="cardRessarcimento">
				  <div class="card-body">
					<h3 class="card-title">
					  <script src="https://cdn.lordicon.com/ritcuqlt.js"></script>
					  <lord-icon src="https://cdn.lordicon.com/wdqztrtx.json" 
					  trigger="loop" 
					  colors="primary:#FF0000" 
					  style="width: 25px; height: 25px; padding-top: 4px;"></lord-icon>
					  Necessita pedir ressarcimento?
						  Favor observar:
					</h3>
					<ul>
					<div id="asd"> 
						<li><strong>Os normativos internos da UCOF, se aquele produto ou serviço, não tem vedação;</strong></li>
						<li><strong>As naturezas de despesas, podendo ser consultados na UCOF ou através do Manual da Contabilidade;</strong></li>
						<li><strong>Os comprovantes fiscais e documentos comprobatórios, se condizem com a descrição e período da despesa, sem rasuras e com CNPJ válido.</strong></li>
					</div>
					<br><br>
					<div class="custom-checkbox custom-checkbox-success">
						<input type="checkbox" id="cbRessarcimento" name="cbRessarcimento">
						<label for="cbRessarcimento">ESTOU CIENTE</label>
					</div>
					</ul>
				  </div>
				</div>
			  </div>
		  </div> 
		</div>  


	<div class="col-md-12 row">
	<div class="col-md-4" id="z1">
	<div class="form-group">
		<label for="txt_Favorecido">Favorecido:</label>
		<input 	type=		"zoom"  
				id=			"txt_Favorecido"  
				name=		"txt_Favorecido"
				data-zoom="{
				'displayKey':				'NOME',
				'datasetId':				'dsc_Favorecido',
				'maximumSelectionLength':	'1',
				'placeholder':				'Escolha o Favorecido',
				'fields':[
				{
					'field':				'NOME',
					'label':				'RAZAO SOCIAL'
				}
				]
				}">
	</div>
	</div>
	<div class="col-md-4" id="z3">
	<div class="form-group">
		<label for="txt_CNPJ_CPF">CPF/CNPJ:</label>
		<input type=		"zoom"  
				id=			"txt_CNPJ_CPF"  
				name=		"txt_CNPJ_CPF"
				data-zoom="{
				'displayKey':				'CGCCFO',
				'datasetId':				'dsc_Favorecido',
				'maximumSelectionLength':	'1',
				'placeholder':				'Escolha o Favorecido',
				'fields':[
				{
					'field':				'CGCCFO',
					'label':				'CGCCFO'
				}
				]
				}">
		<!--<input type="text" class="form-control" name="txt_CNPJ_CPF" id="txt_CNPJ_CPF"> -->
	</div>
	</div>
	
	<div class="col-md-4">
	<div class="form-group">
		<label for="slc_FormaPagamento">Forma de Pagamento:</label>
		<select class="form-control" name="slc_FormaPagamento" id="slc_FormaPagamento">
			<option value="0">Selecione</option>
			<option value="1">Boleto</option>
			<option value="2">Crédito em Conta</option>
		</select>
	</div>
	</div>
	</div>
	
	<div class="col-md-4">
	<div class="form-group">
		<label for="dataUtilizacao2">Data do Inicio de Utilização do Valor Bruto:</label>
		<input type="date" class="form-control"name="dataUtilizacao2" id="dataUtilizacao2">
	</div>
	</div>

	<div class="col-md-4">
	<div class="form-group">
		<label for="dataUtilizacao">Data Final de Utilização do Valor Bruto:</label>
		<input type="date" class="form-control"name="dataUtilizacao" id="dataUtilizacao">
	</div>
	</div>
	
	<div class="col-md-4">
	<div class="form-group">
		<label for="txt_valor">Valor Bruto:</label>
		<input type="text" class="form-control" name="txt_valor" id="txt_valor" onchange="formatarMoeda(this)">
	</div>
	</div>

	<div class="col-md-12">
	<div class="form-group">
		<label for="txt_justificativa">Justificativa do Pedido:</label>
		<textarea rows="9" cols="100" class="form-control" name="txt_justificativa" id="txt_justificativa"></textarea>
	</div>
	</div>
	</div>
	</div>
	</div>

	<div class="panel panel-primary" id="AnaliseAgendamento">
	<div class="panel-heading">
	<h3 class="panel-title"> 
		<b>Analise e Agendamento</b>
	</h3>
	</div>
	<div class="panel-body">
	<div class="col-md-4">
	<div class="form-group">
		<label for="txt_nomeAls">Nome do Analista:</label>
		<select name="txt_nomeAls" id="txt_nomeAls" class="form-control">
			<option value="Selecione">Selecione</option>
			<option value="Renata">Renata</option>
			<option value="Flavio">Flávio</option>
			<option value="Eliana">Eliana</option>
			<option value="Alziney">Alziney</option>
			<option value="Adina">Adina</option>
			<option value="Elder">Elder</option>
			<option value="Terezinha">Terezinha</option>
			<option value="Wagner">Wagner</option>
			<option value="Rayanne">Rayanne</option>
			<option value="Monica">Mônica</option>
			<option value="Joyce">Joyce</option>
		</select>
	</div>
	</div>
	
	<div class="col-md-4">
	<div class="form-group">
		<label for="txt_dtAls">Data e Hora:</label>
		<input type="text" class="form-control" name="txt_dtAls" id="txt_dtAls" readonly>
	</div>
	</div>
	<div class="col-md-4">
	<div class="form-group">
		<label for="txt_dtPag">Data de Pagamento:</label>
		<input type="date" class="form-control" name="txt_dtPag" id="txt_dtPag">
	</div>
	</div>
	<div class="col-md-4" style="display: none;">
	<div class="custom-checkbox custom-checkbox-primary">
		<input type="checkbox" name="ckb_provisao" id="ckb_provisao">
		<label for="ckb_provisao">Pagamento provisionado</label>
	</div>
	</div>
	<div class="col-md-4" style="display: none;">
	<div class="form-group">
		<label for="txt_dtProv">Data de Provisão:</label>
		<input type="date" class="form-control" name="txt_dtProv" id="txt_dtProv" readOnly>
	</div>
	</div>
	</div>
	</div>

	<div class="panel panel-primary" id="despesas">
		<div class="panel-heading">
			<h3 class="panel-title">
				<b>Detalhes das Despesas</b>
			</h3>
		</div>
		<div class="panel-body">
		<div class="form-group  table-responsive">
		<table class="table"> 
		<tbody>
			<tr>
				<td>
					<button type="button" class="addItem" id="addItem" onclick="addItens();">Inserir Item <b>+</b></button>
				</td>
			</tr>       
			<tr>
				<td>
					<table id="dadosItem" tablename="dadosItem" class="table table-hover" noaddbutton="true" nodeletebutton="true">
					<thead>
						<tr>
						<td></td>
						
						</tr>
					</thead>
					<tbody>
						<tr>
							<td>
								<span class="fluig-style-guide fs-display-block fs-md-space">
								<i type="button" class="fluigicon fluigicon-trash fluigicon-md delItem"  id="delItem" name="delItem" 
								onclick="Javascript:fnCustomDeleteItem(this);" style="cursor:pointer"></i> 
							</span>
							</td>
							<td>
								<div class="form-group row">	
								<div class="col-md-3">
								<div class="form-group">
									<label for="txt_descricaoDespesa">Descrição da Despesa<span class="Obrigatorio"><strong>*</strong></span>:</label>
									<textarea class="form-control" name="txt_descricaoDespesa" id="txt_descricaoDespesa"></textarea>
								</div>
								</div>
								<div class="col-md-3">
	 
								<div class="form-group">
									<label for="slc_naturezaItem">Natureza Sintética<span class="Obrigatorio"><strong>*</strong></span>:</label>
									<select class="form-control" name="slc_naturezaItem" id="slc_naturezaItem" onchange="sintetic(this)">
										<option value="0">Selecione</option>
										<option value="1">Serviços Especializados - PJ e PF</option>
										<option value="2">Serviços Contratados - PJ e PF</option>
										<option value="3">Encargos Sociais S/ Serviços de Terceiros</option>
										<option value="4">Despesas com Viagens</option>
										<option value="5">Aluguéis e Encargos - PJ e PF</option>
										<option value="6">Divulgação, Anúncios, Publicidade e Propaganda - PJ e PF</option>
										<option value="7">Serviços Gráficos e de Reprodução - PJ e PF</option>
										<option value="8">Serviços de Comunicação em Geral</option>
										<option value="9">Materiais de Consumo</option>
										<option value="10">Demais Custos e Despesas Gerais</option>
										<option value="11">Despesas Tributárias</option>
										<option value="12">Despesas Financeiras</option>
										<option value="13">Transf. Externas - Convênios com Outras Entidades</option>
										<option value="14">Bens Móveis</option>
										<option value="15">Depósitos Judiciais</option>
									</select>
								</div> 
	
								<div class="form-group">
									<label for="naturezaAnalitica">Natureza Análitica<span class="Obrigatorio"><strong>*</strong></span>:</label>
									<select name="naturezaAnalitica" id="naturezaAnalitica" class="form-control" data-toggle="tooltip" 
									data-placement="right" data-original-title=""></select>
								</div>
	
								<div class="col-md-4">
									<div class="form-group">
										<input type="hidden" class="form-control" name="campoDesc" id="campoDesc">
									</div>
								</div>
								</div>
								</div>
	
								<div class="form-group row">
								<div class="col-md-1">
								<div class="form-group">
									<label for="txt_documento">Documento<span class="Obrigatorio"><strong>*</strong></span>:</label>													
									<input type="text" class="form-control" name="txt_documento" id="txt_documento">
								</div>
								</div>		
								<div class="col-md-2">
								<div class="form-group">
									<label for="txt_CNPJ_CPF_Item">CNPJ/CPF<span class="Obrigatorio"><strong>*</strong></span>:</label>													
									<input type="text" class="form-control" name="txt_CNPJ_CPF_Item" id="txt_CNPJ_CPF_Item">
								</div>
								</div>		
								<div class="col-md-2">
								<div class="form-group">
									<label for="txt_dataItem">Data<span class="Obrigatorio"><strong>*</strong></span>:</label>													
									<input type="date" class="form-control" name="txt_dataItem" id="txt_dataItem">
								</div>
								</div>						
								<div class="col-md-1">
								<div class="form-group">
									<label for="txt_valorItem">Valor<span class="Obrigatorio"><strong>*</strong></span>:</label>													
									<input type="text" class="form-control" name="txt_valorItem" id="txt_valorItem" onchange="formatarMoeda(this)">
								</div>
								</div>
								</div>	
	
							</td> 
						</tr>
					</tbody>
					</table>
				</td>
			</tr>
		</tbody>
		</table>
		</div>
		<div class="row" id="par">
		<div class="col-md-2 col-md-offset-10">
			<label for="txt_ValorTotal">Valor Total:</label>	
			<div class="input-group">
			<input type="text" class="form-control" name="txt_ValorTotal" id="txt_ValorTotal" readonly style="color: black;">
			<span class="input-group-addon">R$</span>
			</div>
		</div> 
		</div>
		</div> 
	
		</div>
	
	<div class="panel panel-primary" id="PagamentoEfetuado">
	<div class="panel-heading">
	<h3 class="panel-title"> 
		<b>Pagamento Efetuado</b>
	</h3>
	</div>
	<div class="panel-body">
	<div class="col-md-4">
	<div class="form-group">
		<label for="txt_nomeAls2">Nome do Analista:</label>
		<select 
			name=			"txt_nomeAls2" 
			id=				"txt_nomeAls2" 
			dataset=		"colleague" 
			datasetkey=		"colleagueId" 
			datasetvalue=	"colleagueName" 
			class=			"form-control"
			readonly>
		</select>
	</div>
	</div>
	<div class="col-md-4">
	<div class="form-group">
		<label for="txt_dtAls2">Data e Hora:</label>
		<input type="text" class="form-control" name="txt_dtAls2" id="txt_dtAls2" readonly>
	</div>
	</div>
	<div class="col-md-4">
	<div class="form-group">
		<label for="txt_dtBaixa">Data de baixa:</label>
		<input type="date" class="form-control" name="txt_dtBaixa" id="txt_dtBaixa">
	</div>
	</div>
	</div>
	</div>
		
	<div class="panel panel-primary" id="DadosPagamento">
	<div class="panel-heading">
		<h3 class="panel-title"> 
			<b>Dados para Pagamento</b>
		</h3>
	</div>
	<div class="panel-body">
	<div class="form-group row">
	<div class="col-md-4">
	<div class="form-group">
		<label for="slc_Natureza">Natureza:</label>
		<select class="form-control" name="slc_Natureza" id="slc_Natureza">
			<option value="0">Selecione</option>
			<option value="1">Aluguéis e Encargos</option>
			<option value="2">Benefícios Sociais</option>
			<option value="3">Bens Móveis</option>
			<option value="4">Demais Custos e Despesas Gerais</option>
			<option value="5">Despesas com Viagens</option>
			<option value="6">Despesas Financeiras</option>
			<option value="7">Despesas Tributárias</option>
			<option value="8">Divulgação, Anúncio, Publicidade e Propaganda</option>
			<option value="9">Encargos Sociais</option>
			<option value="10">Encargos Sociais s/ Serviços de Terceiros</option>
			<option value="11">Materiais de Consumo</option>
			<option value="12">Pessoal</option>
			<option value="13">Serviços Contratados</option>
			<option value="14">Serviços de Comunicação em Geral</option>
			<option value="15">Serviços Especializados</option>
			<option value="16">Serviços Gráficos e de Reprodução</option>
			<option value="17">Transf.Externas - Convênios com outras Entidades</option>
		</select>
	</div>
	</div>
	</div>
	<!-----------------------------------------------------Abertura Painel Dotação Orçamentaria--------------------------------------------------------->
	<div class="form-group  table-responsive">
	<table class="table"> 
	<tbody>
		<tr>
			<td>
				<button type="button" class="addRateio" id="addRateio" onclick="addRateioz();">Inserir Dotação Orçamentária <b>+</b></button>
			</td>
		</tr>       
		<tr>
			<td>
				<table id="dadosrateio" tablename="dadosrateio" class="table table-hover" noaddbutton="true" nodeletebutton="true">
				<thead>
					<tr>
					<td></td>
					
					</tr>
				</thead>
				<tbody>
					<tr>
						<td>
							<span class="fluig-style-guide fs-display-block fs-md-space">
							<i type="button" class="fluigicon fluigicon-trash fluigicon-md delRateio"  id="deleta_rateio" name="deleta_rateio" 
							onclick="Javascript:fnCustomDelete(this);" style="cursor:pointer"></i> 
						</span>
						</td>
						<td>	
							<div class="col-md-4">
							<div class="form-group">
								<label for="slc_FonteRecursos">Fonte de Recurso:</label>
								<select class="form-control" name="slc_FonteRecursos" id="slc_FonteRecursos">
									<option value="0">Selecione</option>
									<option value="1">Contribuição Social Ordinaria - CSO</option>
									<option value="2">Contribuição Social Nacional - CSN</option>
									<option value="3">Receitas de Convênios, Subvenções e Auxílios</option>
									<option value="4">Receitas de Empresas Beneficiadas</option>
									<option value="5">Outras Receitas Financeiras</option>
									<option value="6">Receitas Diversas</option>
								</select>
							</div>
							</div>
							<div class="col-md-9">
							<div class="form-group">
								<div id="az" style="display: none;">
								<label for="txt_projeto">Projeto<span class="Obrigatorio"><strong>*</strong></span>:</label>													
								<input 	type="zoom"  
								id="txt_projeto"  
								name="txt_projeto"
								data-zoom="{
								'displayKey':'NOME',
								'datasetId':'dsprojeto',
								'maximumSelectionLength':'1',
								'placeholder':'Escolha o projeto',
								'fields':[
								{
									'field':'CODCCUSTO',
									'label':'CODIGO'
								},{
										'field':'NOME',
										'label':'NOME',
										'standard':'true'
								}
								]
								}" ></div>
								<input type="hidden" name="txt_codprojeto" id="txt_codprojeto">
								<div id="projetov" style="display: d;"></div>
							</div>
							</div>									
							<div class="col-md-2">
							<div class="form-group">
								<label for="txt_saldo">Saldo:</label>
								<div class="input-group">
									<input  class="form-control mm" type="text" name="txt_saldo" id="txt_saldo" readonly>
								<span class="input-group-addon">$</span>
								</div>		
							</div>
							</div>
							<br>
							<div class="col-md-9">
							<div class="form-group">
								<div id="az" style="display: none;">
								<label for="txt_acao">Ação<span class="Obrigatorio"><strong>*</strong></span>:</label>
								<input type="zoom" 
								class="form-control" 
								id="txt_acao" 
								name="txt_acao"
								data-zoom="{
								'displayKey':'NOME',
								'datasetId':'dsacao',
								'maximumSelectionLength':'1',
								'placeholder':'Escolha a ação',
								'fields':[
								{
									'field':'CODCCUSTO',
									'label':'CODIGO',
									'search':'true'
									
								},{
										'field':'NOME',
										'label':'NOME',
										'search':'true',
										'standard':'true'
								}
								]
								}" ></div>
								<input type="hidden" name="txt_codacao" id="txt_codacao">
								<div id="acaov" style="display: d;"></div>
							</div> 
							</div>
							<div class="col-md-2">
							<div class="form-group">
								<label for="txt_valorUtil">Valor utilizado<span class="Obrigatorio"><strong>*</strong></span>:</label>
								<input type="text" class="form-control" name="txt_valorUtil" id="txt_valorUtil" onchange="formatarMoeda(this);validateValor()">
								<!--<input  class="form-control" type="text" name="txt_percentual" id="txt_percentual" onblur="validadePercentual(this)">
								<input	type="hidden" name="hd_percentual" id="hd_percentual"> -->
							</div>
							</div>
							<!--<div class="col-md-1 col-md-offset-1">
							<div class="form-group">
								<label for="txt_valorObtido">Valor Utilizado:</label>
								<div class="valorObtido" id="valorObtido"></div>
							</div>
							</div>-->
							<br>
							<div class="col-md-9">
							<div class="form-group">
								<div id="az" style="display: none;">
								<label for="txt_recursos">Unidade<span class="Obrigatorio"><strong>*</strong></span>:</label>
								<input type="zoom" 
								class="form-control" 
								id="txt_recursos" 
								name="txt_recursos"
								data-zoom="{
								'displayKey':'NOME',
								'datasetId':'dsunidade',
								'maximumSelectionLength':'1',
								'placeholder':'Escolha a unidade',
								'fields':[
								{
									'field':'CODCCUSTO',
									'label':'CODIGO'
								},{
										'field':'NOME',
										'label':'NOME',
										'standard':'true'
								}
								]
								}" ></div>
							<input type="hidden" name="txt_codrecurso" id="txt_codrecurso">
							<div id="unidadev" style="display: d;"></div>
							</div>
							</div>
						</td> 
					</tr>
				</tbody>
				</table>
			</td>
		</tr>
	</tbody>
	</table>
	<!--------------------------------------------------Fechamento Painel com Cabeçalho Despesa de Viagem----------------------------------------------->
	</div>
	</div>
	</div>

	<script type="text/javascript">
		String.prototype.isEmpty = function () {
			return (!this || 0 === this.length);
		};
		var errorMsg = "";
		var endofline = "</br>";
		//var numState = document.getElementById("hdn_State")
		var beforeSendValidate = function (numState, nextState) {
			var errorMsg = "";
			var endofline = "</br>";
			var lastState = document.getElementById("hdn_lastState").value
			if (numState == 48 && nextState == 69) {
				var GeraNumero = document.getElementById("txt_dtBaixa").value;
				fields = [GeraNumero]
				names = ["Data de baixa"]
				for (var i = 0; i < fields.length; i++) {
					if (fields[i] == null || fields[i] == '') {
						errorMsg += "Favor preencher campo <b>" + names[i] + "</b>" + endofline;
					}
				}
				if (errorMsg.trim().isEmpty() == false) throw "\n" + errorMsg;
			}

			if (lastState == 5 && numState == 15 && nextState != lastState) {
				console.log(lastState)
				errorMsg += "\n A Solicitação deve ser retornada para a atividade Aprovação do Superior." + "</b>" + endofline;
				if (errorMsg.trim().isEmpty() == false) throw "\n" + errorMsg;
			}
			if (lastState == 5 && numState == 15 && nextState != lastState) {
				console.log(lastState)
				errorMsg += "\n A Solicitação deve ser retornada para a atividade PC Ressarcimento." + "</b>" + endofline;
				if (errorMsg.trim().isEmpty() == false) throw "\n" + errorMsg;
			} if (lastState == 11 && numState == 15 && nextState != lastState) {
				console.log(lastState)
				errorMsg += "\n A Solicitação deve ser retornada para a Aprovação da Diretoria." + "</b>" + endofline;
				if (errorMsg.trim().isEmpty() == false) throw "\n" + errorMsg;
			}  
			if (lastState == 19 && numState == 15 && nextState != lastState) {
				console.log(lastState)
				errorMsg += "\n A Solicitação deve ser retornada para a atividade Análise de Documentação." + "</b>" + endofline;
				if (errorMsg.trim().isEmpty() == false) throw "\n" + errorMsg;
			} if (lastState == 21 && numState == 15 && nextState != lastState) {
				console.log(lastState)
				errorMsg += "\n A Solicitação deve ser retornada para a atividade de Agendamento." + "</b>" + endofline;
				if (errorMsg.trim().isEmpty() == false) throw "\n" + errorMsg;
			} if (lastState == 22 && numState == 15 && nextState != lastState) {
				console.log(lastState)
				errorMsg += "\n A Solicitação deve ser retornada para a atividade Geração de Remessa." + "</b>" + endofline;
				if (errorMsg.trim().isEmpty() == false) throw "\n" + errorMsg;
				else {
					console.log(lastState)
				}
				
			}if (lastState == 74 && numState == 78 && nextState != lastState) {
				console.log(lastState)
				errorMsg += "\n A Solicitação deve ser retornada para a atividade PC Adiantamento." + "</b>" + endofline;
				if (errorMsg.trim().isEmpty() == false) throw "\n" + errorMsg;	
			} if (lastState == 76 && numState == 78 && nextState != lastState) {
				console.log(lastState)
				errorMsg += "\n A Solicitação deve ser retornada para a atividade PC Adiantamento." + "</b>" + endofline;
				if (errorMsg.trim().isEmpty() == false) throw "\n" + errorMsg;
			}if (lastState == 80 && numState == 78 && nextState != lastState) {
				console.log(lastState)
				errorMsg += "\n A Solicitação deve ser retornada para a atividade Recebe e Analisa." + "</b>" + endofline;
				if (errorMsg.trim().isEmpty() == false) throw "\n" + errorMsg;
			}if (lastState == 83 && numState == 78 && nextState != lastState) {
				console.log(lastState)
				errorMsg += "\n A Solicitação deve ser retornada para a atividade Analisa e Cadastra no RM." + "</b>" + endofline;
				if (errorMsg.trim().isEmpty() == false) throw "\n" + errorMsg;
			}else {
				console.log(lastState)
			} 
		}

			let dataAnalise = document.getElementById("txt_dtPag").value;
			let dataDaAnaliseDoAgendamento = dataAnalise.split("-").reverse().join("-");

			let nomeDoAnalista = document.getElementById("txt_nomeAls").value;

			let dataFinalDeUtilizacao = document.getElementById("dataUtilizacao2").value;
			let partesData = dataFinalDeUtilizacao.split("-");
			let ano = partesData[0];
			let mes = partesData[1];
			let dia = partesData[2];
			let dataDeUtilizacao = dia + "/" + mes + "/" + ano;

			document.getElementById("txt_dtAlsHidden").value = dataDaAnaliseDoAgendamento;
			document.getElementById("dataUtilizacaoHidden").value = dataDeUtilizacao;	
			document.getElementById("analistaHidden").value = nomeDoAnalista;
			
			
			let z = dataDaAnaliseDoAgendamento.split("-")[0]
			let b = dataDeUtilizacao.split("/")[0]
			let diferencaDias = Math.abs(z - b);

			document.getElementById("diferencaDiasHidden").value =  diferencaDias;
		
			// analytics ADIANTAMENTO : analistaHidden txt_dtAlsHidden  dataUtilizacaoHidden   diferencaDiasHidden
			// analytics RESSARCIMENTO : analistaHidden txt_dtAlsHidden  dataDaMovimentacaoProRM   diferencaDiasHiddenRM

			let solAtual = document.getElementById("txt_NumProc").value;
			let c = DatasetFactory.createConstraint("processHistoryPK.processInstanceId", solAtual, solAtual, ConstraintType.MUST);
			let cc = DatasetFactory.createConstraint("stateSequence", '20', '20', ConstraintType.MUST);
			let constraint = new Array(c,cc);

			let dataset = DatasetFactory.getDataset("processHistory", null, constraint, null);
			let dateTime = new Date(dataset.values[0].movementDatetime)	
			let dataMovimentacaoRM = `${dateTime.getDate().toString().padStart(2, '0')}/${(dateTime.getMonth() + 1).toString().padStart(2, '0')}/${dateTime.getFullYear()}`;

			document.getElementById("dataDaMovimentacaoProRM").value = dataMovimentacaoRM;

			let d = dataMovimentacaoRM.split("/")[0]
			let diferencaDiasRM = Math.abs(z - d);
	
			document.getElementById("diferencaDiasHiddenRM").value =  diferencaDiasRM;

	</script>
</form>
</div>
</body>
</html>